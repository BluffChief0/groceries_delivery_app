<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>Админка</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg:#fff; --text:#111; --muted:#666; --line:#e5e7eb;
      --primary:#4f46e5; --danger:#ef4444; --radius:14px;
    }
    *{box-sizing:border-box}
    body{margin:0; font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif; color:var(--text); background:var(--bg)}
    /* header */
    .topbar{
      display:flex; align-items:center; gap:16px; padding:16px 24px; border-bottom:1px solid var(--line);
      position:sticky; top: 0px;; background:var(--bg); z-index:10;
    }
    .topbar h1{margin:0; font-size:28px}
    .tabs{display:flex; gap:12px; margin-left:24px; flex-wrap:wrap}
    .tab{
      border:1px solid var(--line); background:#fff; padding:10px 18px; border-radius:var(--radius);
      cursor:pointer; font-weight:600;
    }
    .tab.active{border-color:var(--primary); outline:2px solid rgba(79,70,229,.15)}
    .spacer{flex:1}
    .primary{background:var(--primary); color:#fff; border:0; padding:10px 16px; border-radius:12px; cursor:pointer}
    .danger{background:var(--danger); color:#fff; border:0; padding:9px 14px; border-radius:10px; cursor:pointer}
    .ghost{background:#fff; border:1px solid var(--line); padding:9px 14px; border-radius:10px; cursor:pointer}
    .wrap{max-width:1100px; margin:18px auto; padding:0 24px}

    /* auth panel */
    .auth-panel{
      position:absolute; top:60px; right:24px; width:320px; background:#fff; border:1px solid var(--line);
      border-radius:12px; padding:14px; display:none; box-shadow:0 10px 30px rgba(0,0,0,.06);
    }
    .auth-panel.open{display:block}
    .row{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
    input[type="text"], input[type="password"]{
      padding:9px 10px; border:1px solid var(--line); border-radius:10px; width:100%;
    }
    .muted{color:var(--muted); font-size:13px}

    /* content */
    .toolbar{border:1px solid var(--line); border-radius:var(--radius); padding:12px; display:flex; align-items:center; gap:8px; flex-wrap:wrap; background:#fff}
    .list{display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:14px; margin-top:16px}
    .card{background:#fff; border:1px solid var(--line); border-radius:var(--radius); padding:14px}
    .title{display:flex; align-items:center; gap:10px; font-weight:700}
    .img{height:28px; width:28px; object-fit:cover; border-radius:6px; background:#fff; border:1px solid var(--line)}
    .preview{height:40px; width:40px; object-fit:cover; border-radius:8px; border:1px solid var(--line)}

    section[data-view]{display:none}
    section[data-view].active{display:block}
    .dropdown{position:relative}
    .ghost.big{padding:12px 16px; font-weight:600}
    .dropdown-menu{
      position:absolute; top:100%; left:0;
      z-index:20; background:#fff; border:1px solid var(--line);
      border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,.06);
      padding:6px; display:none; max-height:300px; overflow:auto; min-width:240px
    }
    .dropdown-menu.open{display:block}
    .dropdown-menu button{
      display:block; width:100%; text-align:left; background:#fff; border:0;
      padding:8px 10px; border-radius:8px; cursor:pointer
    }
    .dropdown-menu button:hover{background:#f5f6ff}
  </style>
</head>

<body>
  <header class="topbar">
    <h1>Категории</h1>

    <nav class="tabs" id="tabs">
      <button class="tab active" data-view="categories">категории</button>
      <button class="tab" data-view="products">продукты</button>
      <button class="tab" data-view="users">пользователи</button>
      <button class="tab" data-view="workers">сотрудники</button>
    </nav>

    <div class="spacer"></div>

    <!-- кнопка входа справа -->
    <button id="loginBtn" class="primary">Войти</button>

    <!-- выпадающее окошко входа -->
    <div id="authPanel" class="auth-panel">
      <div class="row" style="margin-bottom:6px"><b>Вход</b></div>
      <div class="row"><input id="loginEmail" type="text" placeholder="email" /></div>
      <div class="row"><input id="loginPassword" type="password" placeholder="пароль" /></div>
      <div class="row" style="margin-top:8px">
        <button id="doLogin" class="primary">Войти</button>
        <button id="doLogout" class="ghost">Выйти</button>
        <span id="authMsg" class="muted"></span>
      </div>
    </div>
  </header>

  <main class="wrap">

    <!-- ===== Категории ===== -->
    <section data-view="categories" class="active">
      <form id="createForm" class="toolbar" onsubmit="return false;">
        <input id="name" placeholder="Название (например, Овощи)" />
        <input id="file" type="file" accept="image/*" />
        <img id="preview" class="preview" alt="" style="display:none" />
        <button class="ghost" id="btnUpload" type="button">Загрузить</button>
        <button class="primary" id="btnCreate" type="button">Добавить</button>
        <button class="ghost" id="btnReload" type="button">Обновить список</button>
        <span id="msg" class="muted"></span>
      </form>
      <div id="list" class="list"></div>
    </section>


    <section data-view="products">
      <!-- Панель с фильтром + действия -->
      <div class="toolbar">
        <div class="dropdown" id="pFilterBox">
          <button type="button" id="pFilterBtn" class="ghost big">Все категории ▾</button>
          <div class="dropdown-menu" id="pFilterMenu"></div>
        </div>

        <button class="primary" id="pToggleCreate" type="button">Добавить товар</button>
        <button class="ghost" id="pBtnReload" type="button">Обновить список</button>
        <span id="pMsg" class="muted"></span>
      </div>

      <!-- Спойлер с формой добавления -->
      <details id="pCreatePanel" class="card" style="margin-top:12px; display:none">
        <summary style="cursor:pointer; font-weight:700">Форма добавления товара</summary>
        <div class="row" style="margin-top:10px; gap:12px">
          <input id="pName" placeholder="Название (например, Огурцы 1кг)" style="flex:1" />
          <select id="pCategory" style="min-width:220px"></select>
        </div>

        <div class="row" style="margin-top:10px; gap:12px">
          <input id="pFile" type="file" accept="image/*" />
          <img id="pPreview" class="preview" alt="" style="display:none" />
          <button class="ghost" id="pBtnUpload" type="button">Загрузить картинку</button>
        </div>

        <div class="row" style="margin-top:10px; gap:12px">
          <input id="pPrice" type="number" step="0.01" placeholder="Цена, ₽" style="width:160px" />
          <input id="pDiscountPrice" type="number" step="0.01" placeholder="Цена со скидкой, ₽" style="width:200px" />
          <input id="pWeight" type="number" step="0.01" placeholder="Вес, кг" style="width:140px" />
          <input id="pCalories" type="number" step="1" placeholder="Калории, ккал" style="width:160px" />
        </div>

        <div class="row" style="margin-top:10px; gap:12px">
          <input id="pCountry" placeholder="Страна" style="width:220px" />
          <input id="pPackage" placeholder="Упаковка (например, банка, 0.4кг)" style="flex:1" />
        </div>

        <div style="margin-top:10px">
          <textarea id="pDesc" placeholder="Описание" rows="3" style="width:100%; border:1px solid var(--line); border-radius:10px; padding:10px"></textarea>
        </div>

        <!-- Состав -->
        <div style="margin-top:10px">
          <textarea id="pComposition" placeholder="Состав (текст)" rows="2" style="width:100%; border:1px solid var(--line); border-radius:10px; padding:10px"></textarea>
        </div>

        <!--- Пишевая ценность-->>
        <div class="row" style="margin-top:10px; gap:12px; align-items:center">
          <label class="muted" style="min-width:140px">Пищевая ценность:</label>
          <input id="pProt" type="number" step="0.01" placeholder="Белки, г/100г" style="width:170px" />
          <input id="pFat"  type="number" step="0.01" placeholder="Жиры, г/100г"  style="width:170px" />
          <input id="pCarb" type="number" step="0.01" placeholder="Углеводы, г/100г" style="width:190px" />
        </div>

        <div class="row" style="margin-top:12px; gap:10px">
          <button class="primary" id="pBtnCreate" type="button">Сохранить товар</button>
          <button class="ghost" id="pBtnCancel" type="button">Отмена</button>
        </div>
      </details>

      <div id="productsList" class="list" style="margin-top:16px"></div>
    </section>


    <!-- ===== Пользователи (заглушка) ===== -->
    <section data-view="users">
      <div class="toolbar">
        <span class="muted">Раздел «Пользователи» — список, поиск, блокировка/разблокировка, смена ролей.</span>
      </div>
      <div id="usersList" class="list"></div>
    </section>

    <!-- ===== Сотрудники (заглушка) ===== -->
    <section data-view="workers">
      <div class="toolbar">
        <span class="muted">Раздел «Сотрудники» — роли, доступы, приглашения.</span>
      </div>
      <div id="workersList" class="list"></div>
    </section>

  </main>

  <script src="./admin.js"></script>
</body>
</html>